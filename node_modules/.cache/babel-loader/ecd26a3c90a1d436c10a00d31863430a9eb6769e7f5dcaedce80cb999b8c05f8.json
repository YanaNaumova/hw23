{"ast":null,"code":"import { jwtDecode } from \"jwt-decode\";\nimport { logout } from \"../redux/slice/authSlice\";\nconst isTokenExpired = token => {\n  if (!token) return true;\n  const decoded = jwtDecode(token);\n  const currentTime = Date.now / 1000;\n  return decoded.exp < currentTime;\n};\nexport const checkTokenExpirationMiddleware = store => next => action => {\n  const token = store.getState().auth.token;\n  if (token && isTokenExpired(token)) {\n    store.dispatch(logout());\n  }\n  return next(action);\n};","map":{"version":3,"names":["jwtDecode","logout","isTokenExpired","token","decoded","currentTime","Date","now","exp","checkTokenExpirationMiddleware","store","next","action","getState","auth","dispatch"],"sources":["/Users/ananaumova/REACT/1/src/middlewares/token.js"],"sourcesContent":["import { jwtDecode } from \"jwt-decode\";\r\nimport { logout } from \"../redux/slice/authSlice\";\r\n\r\nconst isTokenExpired = (token) => {\r\n  if (!token) return true;\r\n\r\n  const decoded = jwtDecode(token);\r\n  const currentTime = Date.now / 1000;\r\n\r\n  return decoded.exp < currentTime;\r\n};\r\n\r\nexport const checkTokenExpirationMiddleware = (store) => (next) => (action) => {\r\n  const token = store.getState().auth.token;\r\n\r\n  if (token && isTokenExpired(token)) {\r\n    store.dispatch(logout());\r\n  }\r\n\r\n  return next(action);\r\n};\r\n"],"mappings":"AAAA,SAASA,SAAS,QAAQ,YAAY;AACtC,SAASC,MAAM,QAAQ,0BAA0B;AAEjD,MAAMC,cAAc,GAAIC,KAAK,IAAK;EAChC,IAAI,CAACA,KAAK,EAAE,OAAO,IAAI;EAEvB,MAAMC,OAAO,GAAGJ,SAAS,CAACG,KAAK,CAAC;EAChC,MAAME,WAAW,GAAGC,IAAI,CAACC,GAAG,GAAG,IAAI;EAEnC,OAAOH,OAAO,CAACI,GAAG,GAAGH,WAAW;AAClC,CAAC;AAED,OAAO,MAAMI,8BAA8B,GAAIC,KAAK,IAAMC,IAAI,IAAMC,MAAM,IAAK;EAC7E,MAAMT,KAAK,GAAGO,KAAK,CAACG,QAAQ,CAAC,CAAC,CAACC,IAAI,CAACX,KAAK;EAEzC,IAAIA,KAAK,IAAID,cAAc,CAACC,KAAK,CAAC,EAAE;IAClCO,KAAK,CAACK,QAAQ,CAACd,MAAM,CAAC,CAAC,CAAC;EAC1B;EAEA,OAAOU,IAAI,CAACC,MAAM,CAAC;AACrB,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}